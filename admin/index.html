<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¯ÙˆÙ†Ø© Ocean View Villa</title>
    <link rel="stylesheet" href="admin/blog-style.css">
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>

    <nav class="master-nav">
        <div class="nav-container">
            <img src="img/logo.png" alt="Logo" class="main-logo">
            <div class="nav-actions">
                <a href="#" class="btn-book-nav">Book Now</a>
                <div class="lang-switcher">
                    <select>
                        <option>ğŸ‡²ğŸ‡¦ AR</option>
                        <option>ğŸ‡¬ğŸ‡§ EN</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="tools-bar">
            <a href="#" class="tool-item">âœ¨</a>
            <a href="#" class="tool-item">ğŸ¦†</a>
            <a href="#" class="tool-item">ğŸ’µ</a>
            <a href="#" class="tool-item">ğŸ’°</a>
            <a href="#" class="tool-item">ğŸ–ï¸</a>
            <a href="#" class="tool-item">ğŸ£</a>
            <a href="#" class="tool-item">ğŸŒŠ</a>
            <a href="#" class="tool-item">ğŸŒ¡ï¸</a>
        </div>
    </nav>

    <header class="blog-hero">
        <h1>Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø³ÙŠØ¯ÙŠ Ù…ÙˆØ³Ù‰</h1>
        <p>Ø§ÙƒØªØ´Ù Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ù…Ø­ÙŠØ· ÙˆØ­Ø¶Ø§Ø±Ø© Ø¯ÙƒØ§Ù„Ø© Ø¨Ù€ 6 Ù„ØºØ§Øª Ø¹Ø§Ù„Ù…ÙŠØ©</p>
    </header>

    <main id="posts-container">
        <p style="text-align:center; padding: 50px;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª ÙˆØ§Ù„ØªØ­Ù...</p>
    </main>

    <footer class="main-footer">
        <p>Â© Ocean View Villa Morocco 2026. ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
    </footer>

    <script>
        async function loadPosts() {
            const container = document.getElementById('posts-container');
            try {
                // Ù‡Ø§Ø¯ÙŠ Ù‡ÙŠ Ø§Ù„Ø¨Ù„Ø§ØµØ© ÙÙŠÙ† ÙƒÙŠØªØ­Ø·Ùˆ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª ÙÙŠ GitHub
                const response = await fetch('https://api.github.com/repos/artist-24-7/ocean-view-blog/contents/_posts');
                const files = await response.json();

                if (files.length === 0) {
                    container.innerHTML = '<p style="text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‚Ø§Ù„Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>';
                    return;
                }

                container.innerHTML = ''; // Ù…Ø³Ø­ Ø¬Ù…Ù„Ø© "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„"

                for (const file of files) {
                    if (file.name.endsWith('.md')) {
                        // Ø¬Ù„Ø¨ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù‚Ø§Ù„
                        const res = await fetch(file.download_url);
                        const content = await res.text();
                        
                        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø¨Ø³ÙŠØ·)
                        const title = content.split('\n')[1]?.replace('title: ', '').replace(/"/g, '') || 'Ù…Ù‚Ø§Ù„ Ø¬Ø¯ÙŠØ¯';
                        
                        // ØµÙ†Ø¹ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ù‚Ø§Ù„
                        const card = document.createElement('div');
                        card.className = 'post-card';
                        card.innerHTML = `
                            <div class="post-content">
                                <h2 class="post-title">${title}</h2>
                                <p>Ø§Ø¶ØºØ· Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„...</p>
                                <a href="${file.html_url}" target="_blank" style="color:var(--accent); text-decoration:none; font-weight:bold;">Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ù‚Ø§Ù„ â†</a>
                            </div>
                        `;
                        container.appendChild(card);
                    }
                }
            } catch (error) {
                container.innerHTML = '<p style="text-align:center;">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„ÙØ§Øª ÙÙŠ Ù…Ø¬Ù„Ø¯ _posts.</p>';
            }
        }
        loadPosts();
    </script>
</body>
</html>
